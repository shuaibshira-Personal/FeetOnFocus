<!DOCTYPE html>
<html>
<head>
    <title>Debug Suppliers</title>
</head>
<body>
    <h1>Supplier Debug</h1>
    <button onclick="checkSuppliers()">Check Suppliers</button>
    <button onclick="initSuppliers()">Force Init Suppliers</button>
    <button onclick="clearDatabase()">Clear Database</button>
    
    <div id="output"></div>

    <script src="src/database/database.js"></script>
    <script>
        async function checkSuppliers() {
            try {
                await inventoryDB.init();
                const suppliers = await inventoryDB.getAllSuppliers();
                document.getElementById('output').innerHTML = 
                    '<h3>Current Suppliers:</h3><pre>' + JSON.stringify(suppliers, null, 2) + '</pre>';
            } catch (error) {
                document.getElementById('output').innerHTML = 
                    '<h3>Error:</h3><pre>' + error.message + '</pre>';
            }
        }

        async function initSuppliers() {
            try {
                await inventoryDB.init();
                const defaultSuppliers = [
                    { name: 'Temu', code: 'temu', color: '#FF6B35', isDefault: true },
                    { name: 'Transpharm', code: 'transpharm', color: '#17a2b8', isDefault: true },
                    { name: 'Medis', code: 'medis', color: '#28a745', isDefault: true },
                    { name: 'Other', code: 'other', color: '#6c757d', isDefault: true }
                ];
                
                for (const supplier of defaultSuppliers) {
                    try {
                        await inventoryDB.addSupplier(supplier);
                        console.log('Added supplier:', supplier.name);
                    } catch (error) {
                        console.log('Error adding supplier', supplier.name, ':', error.message);
                    }
                }
                
                checkSuppliers();
            } catch (error) {
                document.getElementById('output').innerHTML = 
                    '<h3>Error:</h3><pre>' + error.message + '</pre>';
            }
        }

        async function clearDatabase() {
            if (confirm('This will delete the database. Continue?')) {
                indexedDB.deleteDatabase('FeetOnFocusDB');
                setTimeout(() => {
                    location.reload();
                }, 1000);
            }
        }
    </script>
</body>
</html>